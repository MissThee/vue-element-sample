{"version":3,"sources":["webpack:///./src/views/fireService/dangerousChemicals/fileUploader.vue?2d7b","webpack:///src/views/fireService/dangerousChemicals/fileUploader.vue","webpack:///./src/views/fireService/dangerousChemicals/fileUploader.vue?de39","webpack:///./src/views/fireService/dangerousChemicals/fileUploader.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","fileList","handleExceed","changeFile","removeFile","checkFile","headers","uploadSuccess","onProgress","onError","staticClass","_v","slot","staticRenderFns","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,YAAY,CAACE,IAAI,WAAWC,MAAM,CAAC,OAAS,iCAAiC,KAAO,GAAG,YAAYP,EAAIQ,SAAS,MAAQ,EAAE,YAAYR,EAAIS,aAAa,UAAW,EAAM,eAAc,EAAK,YAAYT,EAAIU,WAAW,YAAYV,EAAIW,WAAW,gBAAgBX,EAAIY,UAAU,QAAUZ,EAAIa,QAAQ,aAAab,EAAIc,cAAc,cAAcd,EAAIe,WAAW,WAAWf,EAAIgB,UAAU,CAACZ,EAAG,IAAI,CAACa,YAAY,mBAAmBb,EAAG,MAAM,CAACa,YAAY,mBAAmB,CAACjB,EAAIkB,GAAG,aAAad,EAAG,KAAK,CAACJ,EAAIkB,GAAG,YAAYd,EAAG,MAAM,CAACa,YAAY,iBAAiBV,MAAM,CAAC,KAAO,OAAOY,KAAK,OAAO,CAACnB,EAAIkB,GAAG,kBAC3qBE,EAAkB,G,wBC0BtB,GACE,KAAF,gBACE,WAAF,GACE,KAHF,WAII,MAAJ,CACM,SAAN,GACM,iBAAN,IAGE,SAAF,CACI,MADJ,WAEM,EAAN,iBAEI,QAJJ,WAKM,MAAN,CAAQ,cAAR,cAGE,QAAF,CACI,aADJ,SACA,KACM,KAAN,gCAGI,WALJ,SAKA,OAEI,WAPJ,SAOA,KACM,KAAN,aAEI,UAVJ,SAUA,GAcM,IAAN,sBAIM,OAHN,GACQ,KAAR,mCAEA,GAEI,cA9BJ,SA8BA,OACM,KAAN,mBACA,SACQ,KAAR,eAAU,KAAV,WAAU,IAAV,WAAU,OAAV,aAEQ,KAAR,8BACQ,KAAR,8BAGI,WAvCJ,WAwCM,KAAN,4BACM,KAAN,aAEI,SA3CJ,SA2CA,KACM,KAAN,WAAQ,KAAR,EAAQ,IAAR,EAAQ,OAAR,aAEI,kBA9CJ,WA+CM,OAAN,sBAEI,WAjDJ,SAiDA,OACM,KAAN,oBAEI,QApDJ,WAqDM,KAAN,sBCjGoX,I,YCOhXC,EAAY,eACd,EACAtB,EACAqB,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"static/js/chunk-2d0c42d0.bbdd067c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-upload',{ref:\"uploader\",attrs:{\"action\":'/dangerousChemicals/uploadFile',\"drag\":\"\",\"file-list\":_vm.fileList,\"limit\":1,\"on-exceed\":_vm.handleExceed,\"multiple\":false,\"auto-upload\":true,\"on-change\":_vm.changeFile,\"on-remove\":_vm.removeFile,\"before-upload\":_vm.checkFile,\"headers\":_vm.headers,\"on-success\":_vm.uploadSuccess,\"on-progress\":_vm.onProgress,\"on-error\":_vm.onError}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击上传\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\" 文件不超过50M\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-upload :action=\"'/dangerousChemicals/uploadFile'\"\r\n               drag\r\n               :file-list=\"fileList\"\r\n               :limit=\"1\"\r\n               :on-exceed=\"handleExceed\"\r\n               :multiple=\"false\"\r\n               :auto-upload=\"true\"\r\n               :on-change=\"changeFile\"\r\n               :on-remove=\"removeFile\"\r\n               :before-upload=\"checkFile\"\r\n               :headers=\"headers\"\r\n               :on-success=\"uploadSuccess\"\r\n               ref=\"uploader\"\r\n               :on-progress=\"onProgress\"\r\n               :on-error=\"onError\"\r\n    >\r\n        <i class=\"el-icon-upload\"></i>\r\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n        <div class=\"el-upload__tip\" slot=\"tip\"> 文件不超过50M</div>\r\n    </el-upload>\r\n</template>\r\n\r\n<script>\r\n    import {mapGetters} from 'vuex'\r\n    import {userAuth} from \"src/utils/auth\";\r\n\r\n    export default {\r\n        name: \"file-uploader\",\r\n        components: {},\r\n        data() {\r\n            return {\r\n                fileList: [],\r\n                fileIsUploading: false,\r\n            }\r\n        },\r\n        computed: {\r\n            token() {\r\n                userAuth.getToken()\r\n            },\r\n            headers() {\r\n                return {'Authorization': this.token}\r\n            }\r\n        },\r\n        methods: {\r\n            handleExceed(files, fileList) {\r\n                this.$message.warning('限制上传 1 个文件');\r\n                // this.$message.warning(`当前限制上传 1 个文件，选择了 ${files.length + fileList.length}个文件`);//，共选择了 ${files.length + fileList.length} 个文件\r\n            },\r\n            changeFile(file, fileList) {\r\n            },\r\n            removeFile(file, fileList) {\r\n                this.fileList = [];\r\n            },\r\n            checkFile(file) {\r\n                // const isJPG = (file.type === 'image/jpeg') || (file.type === 'image/jpg');\r\n                // const isPNG = file.type === 'image/png';\r\n                // const isGIF = file.type === 'image/gif';\r\n                // const isBMP = file.type === 'image/bmp';\r\n                // const isLt2M = file.size / 1024 / 1024 < 2;\r\n                //\r\n                // if (!(isJPG || isPNG || isGIF || isBMP)) {\r\n                //   this.$message.error('上传头像图片只能是 JPG/PNG/GIF/BMP 格式!');\r\n                // }\r\n                // if (!isLt2M) {\r\n                //   this.$message.error('上传头像图片大小不能超过 2MB!');\r\n                // }\r\n                // return (isJPG || isPNG || isGIF || isBMP) && isLt2M;\r\n                const canUpload = file.size / 1024 / 1024 < 50;\r\n                if (!canUpload) {\r\n                    this.$message.error('上传附件大小不能超过 50MB!');\r\n                }\r\n                return canUpload\r\n            },\r\n            uploadSuccess(res, data, dataList) {\r\n                this.fileIsUploading = false;\r\n                if (res.result) {\r\n                    this.fileList.push({name: res.fileName, url: res.filePath, status: 'success'});\r\n                } else {\r\n                    this.$message.error('上传附件出错，上传失败');\r\n                    this.$refs.uploader.clearFiles();\r\n                }\r\n            },\r\n            clearFiles() {//供外部调用，清除文件内容\r\n                this.$refs.uploader.clearFiles();\r\n                this.fileList = [];\r\n            },\r\n            setFiles(fileName, path) {//供外部调用，初始化文件内容\r\n                this.fileList = [{name: fileName, url: path, status: 'success'}];\r\n            },\r\n            getUploadingState() {//供外部调用，获取控件上传文件的状态\r\n                return this.fileIsUploading;\r\n            },\r\n            onProgress(event, file, fileList) {\r\n                this.fileIsUploading = true;\r\n            },\r\n            onError() {\r\n                this.fileIsUploading = false;\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fileUploader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./fileUploader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fileUploader.vue?vue&type=template&id=d77ea28a&scoped=true&\"\nimport script from \"./fileUploader.vue?vue&type=script&lang=js&\"\nexport * from \"./fileUploader.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d77ea28a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}