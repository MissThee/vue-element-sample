{"version":3,"sources":["webpack:///./src/views/fireService/dangerousChemicals/treeList.vue?d357","webpack:///src/views/fireService/dangerousChemicals/treeList.vue","webpack:///./src/views/fireService/dangerousChemicals/treeList.vue?dbcb","webpack:///./src/views/fireService/dangerousChemicals/treeList.vue","webpack:///./src/api/dangerous-chemicals.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","callback","$$v","filterText","expression","ref","style","overflow","padding","top","treeData","defaultProps","editingMode","renderContent","filterNode","on","handleNodeClick","dialogTitle","formDialogStatus","formDialogVisible","$event","rules","form","cascaderProps","$set","staticClass","slot","_v","postData","staticRenderFns","component","fetchDangerousChemicalsTable","pageNumber","pageSize","typeId","keyWords","request","url","data","fetchDangerousChemicals","id","updateDangerousChemicals","createDangerousChemicals","deleteDangerousChemicals","fetchTypeList","needChildren","fetchTypeOne","updateType","createType","deleteType"],"mappings":"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","file":"static/js/chunk-3d784ab9.79cb8907.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('el-input',{attrs:{\"placeholder\":\"输入关键字进行过滤\"},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}}),_c('el-tree',{ref:\"treeType\",style:({ overflow:'auto',padding:'0px',top:'0px'}),attrs:{\"data\":_vm.treeData,\"props\":_vm.defaultProps,\"node-key\":\"id\",\"default-expand-all\":\"\",\"expand-on-click-node\":false,\"render-content\":_vm.editingMode?_vm.renderContent:null,\"filter-node-method\":_vm.filterNode},on:{\"node-click\":_vm.handleNodeClick}}),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle[_vm.formDialogStatus],\"visible\":_vm.formDialogVisible,\"close-on-click-modal\":false,\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.formDialogVisible=$event}}},[_c('el-form',{ref:\"formData\",attrs:{\"rules\":_vm.rules,\"size\":\"mini\",\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"所属类别\",\"prop\":\"parentId\"}},[_c('el-cascader',{attrs:{\"size\":\"mini\",\"props\":_vm.cascaderProps,\"placeholder\":\"所属类别\",\"show-all-levels\":false,\"options\":_vm.treeData,\"filterable\":\"\",\"clearable\":false},model:{value:(_vm.form.parentId),callback:function ($$v) {_vm.$set(_vm.form, \"parentId\", $$v)},expression:\"form.parentId\"}})],1),_c('el-form-item',{attrs:{\"label\":\"类别名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.formDialogVisible = false}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.postData()}}},[_vm._v(\"确定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <span>\r\n      <el-input placeholder=\"输入关键字进行过滤\" v-model=\"filterText\"> </el-input>\r\n      <el-tree :data=\"treeData\"\r\n               :style=\"{ overflow:'auto',padding:'0px',top:'0px'}\"\r\n               :props=\"defaultProps\"\r\n               node-key=\"id\"\r\n               default-expand-all\r\n               :expand-on-click-node=\"false\"\r\n               :render-content=\"editingMode?renderContent:null\"\r\n               :filter-node-method=\"filterNode\"\r\n               ref=\"treeType\"\r\n               @node-click=\"handleNodeClick\"\r\n      ></el-tree>\r\n      <el-dialog :title=\"dialogTitle[formDialogStatus]\" :visible.sync=\"formDialogVisible\" :close-on-click-modal=\"false\" append-to-body>\r\n        <el-form :rules=\"rules\" ref=\"formData\" size=\"mini\" :model=\"form\" label-width=\"80px\">\r\n            <el-form-item label=\"所属类别\" prop=\"parentId\">\r\n                <el-cascader\r\n                        size=\"mini\"\r\n                        :props=\"cascaderProps\"\r\n                        placeholder=\"所属类别\"\r\n                        :show-all-levels=\"false\"\r\n                        :options=\"treeData\"\r\n                        filterable\r\n                        :clearable=\"false\"\r\n                        v-model=\"form.parentId\"\r\n                ></el-cascader>\r\n            </el-form-item>\r\n            <el-form-item label=\"类别名称\" prop=\"name\">\r\n                <el-input v-model=\"form.name\"></el-input>\r\n            </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"formDialogVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"postData()\">确定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </span>\r\n</template>\r\n\r\n<script>\r\n    import {createType, deleteType, updateType, fetchTypeOne} from 'src/api/dangerous-chemicals'\r\n    import {showNotify} from 'src/utils/tools'\r\n\r\n    export default {\r\n        name: \"tree-list\",\r\n        props: {\r\n            'leftTreeData': {},\r\n            'editingMode': {default: false}\r\n        },\r\n        data() {\r\n            return {\r\n                clientHeight: 0,\r\n                defaultProps: {\r\n                    children: 'children',\r\n                    label: 'label'\r\n                },\r\n                dialogTitle: {\r\n                    update: '编辑',\r\n                    create: '创建'\r\n                },\r\n                formDialogStatus: '',\r\n                rules: {\r\n                    name: [{required: true, message: '类别名称不能为空', trigger: 'blur'}]\r\n                },\r\n                formDialogVisible: false,\r\n                form: {\r\n                    id: null,\r\n                    parentId: null,\r\n                    name: null\r\n                },\r\n                cascaderProps: {\r\n                    value: 'id',\r\n                    expandTrigger: 'hover',\r\n                    checkStrictly: true\r\n                },\r\n                filterText: '',\r\n            }\r\n        },\r\n        computed: {\r\n            treeData() {\r\n                return [{\r\n                    id: -1,\r\n                    label: '【所有类别】',\r\n                    children: this.leftTreeData\r\n                }];\r\n            }\r\n        },\r\n        mounted() {\r\n            // this.$nextTick(function () {\r\n            this.clientHeight = `${document.documentElement.clientHeight}` - 80;\r\n            const that = this;\r\n            window.onresize = function temp() {\r\n                that.clientHeight = `${document.documentElement.clientHeight}` - 80;\r\n            };\r\n            // })\r\n        },\r\n        watch: {\r\n            filterText(val) {\r\n                this.$refs.treeType.filter(val);\r\n            }\r\n        },\r\n        methods: {\r\n            renderContent: function (createElement, {node, data, store}) {\r\n                var self = this;\r\n                return createElement('span', {\r\n                    attrs: {\r\n                        style: \"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;\"\r\n                    }\r\n                }, [\r\n                    createElement('span', [\r\n                        createElement('span', {\r\n                            attrs: {\r\n                                style: \"float: left;\"\r\n                            }\r\n                        }, node.label)\r\n                    ]),\r\n                    createElement('span', [\r\n                        createElement('el-button', {\r\n                            attrs: {\r\n                                size: \"mini\",\r\n                                style: \"font-size: 12px;padding: 3px\",\r\n                                type: \"text\",\r\n                                plain: ''\r\n                            }, on: {\r\n                                click: function () {\r\n                                    self.formDialogVisible = true;\r\n                                    self.formDialogStatus = \"create\";\r\n                                    delete self.form.id;\r\n                                    self.form.name = \"\";\r\n                                    self.form.parentId = data.id;\r\n                                }\r\n                            }\r\n                        }, \"添加\"),\r\n                        createElement('el-button', {\r\n                            attrs: {\r\n                                size: \"mini\",\r\n                                style: \"font-size: 12px;padding: 3px;\" + (data.id <= 0 ? \"display:none;\" : \"\"),\r\n                                type: \"text\",\r\n                                plain: ''\r\n                            },\r\n                            on: {\r\n                                click: function () {\r\n                                    self.fetchTypeDataOne(data.id);\r\n                                    self.formDialogVisible = true;\r\n                                    self.formDialogStatus = \"update\";\r\n                                }\r\n                            }\r\n                        }, \"编辑\"),\r\n                        createElement('el-button', {\r\n                            attrs: {\r\n                                size: \"mini\",\r\n                                style: \"font-size: 12px;color:red;padding: 3px;\" + (data.id <= 0 ? \"display:none;\" : \"\"),\r\n                                type: \"text\",\r\n                                plain: ''\r\n                            }, on: {\r\n                                click: function () {\r\n                                    self.$confirm('将删除类别 <span style=\"color:blue\">' + data.label + '</span>，若此类别下有知识条目，删除此类别后，只能在【所有类别】中查看这些知识条目，是否继续?', '提示', {\r\n                                        confirmButtonText: '确定',\r\n                                        cancelButtonText: '取消',\r\n                                        type: 'warning',\r\n                                        dangerouslyUseHTMLString: true\r\n                                    }).then(() => {\r\n                                        self.listLoading = true;\r\n                                        deleteType(data.id).then(response => {\r\n                                            self.listLoading = false;\r\n                                            self.refreshNode();\r\n                                            showNotify(response, '删除');\r\n                                        })\r\n                                    }).catch(() => {\r\n                                    });\r\n                                }\r\n                            }\r\n                        }, \"删除\")\r\n                    ]),\r\n                ]);\r\n            },\r\n            postData() {\r\n                this.$refs['formData'].validate((valid) => {\r\n                    if (valid) {\r\n                        if (this.formDialogStatus === 'update') {\r\n                            updateType(this.form).then(response => {\r\n                                this.formDialogVisible = false;\r\n                                this.refreshNode();\r\n                                showNotify(response, '更新');\r\n                            })\r\n                        } else if (this.formDialogStatus === 'create') {\r\n                            createType(this.form).then(response => {\r\n                                this.formDialogVisible = false;\r\n                                this.refreshNode();\r\n                                showNotify(response, '添加');\r\n                            })\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n            filterNode(value, data) {\r\n                if (!value) return true;\r\n                return data.label.indexOf(value) !== -1;\r\n            },\r\n            handleNodeClick(data) {\r\n                this.$emit('setCurrentSelectedId', data.id);\r\n            },\r\n            refreshNode() {\r\n                this.$emit('refreshNode');\r\n            },\r\n            fetchTypeDataOne(id) {\r\n                fetchTypeOne(id).then(response => {\r\n                    this.form.id = response.data.id;\r\n                    this.form.name = response.data.label;\r\n                    if (response.data.parentId === undefined) {\r\n                        this.form.parentId = -1;//级联选择器id值不能为0，否则绑定不上数据，原因不明，仅在此模块中出现此问题\r\n                    } else {\r\n                        this.form.parentId = response.data.parentId;\r\n                    }\r\n                })\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./treeList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./treeList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./treeList.vue?vue&type=template&id=1deb747d&scoped=true&\"\nimport script from \"./treeList.vue?vue&type=script&lang=js&\"\nexport * from \"./treeList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1deb747d\",\n  null\n  \n)\n\nexport default component.exports","import request from '../utils/request'\r\n\r\nexport function fetchDangerousChemicalsTable(pageNumber, pageSize, typeId, keyWords) {\r\n  return request({\r\n    url: '/dangerousChemicals/table',\r\n    data: {pageNumber, pageSize, typeId, keyWords}\r\n  })\r\n}\r\n\r\nexport function fetchDangerousChemicals(id) {\r\n  return request({\r\n    url: '/dangerousChemicals/dangerousChemicals',\r\n    data: {id}\r\n  })\r\n}\r\n\r\nexport function updateDangerousChemicals(form) {\r\n  return request({\r\n    url: '/dangerousChemicals/update',\r\n    data: {form}\r\n  })\r\n}\r\n\r\nexport function createDangerousChemicals(form) {\r\n  return request({\r\n    url: '/dangerousChemicals/create',\r\n    data: {form}\r\n  })\r\n}\r\n\r\nexport function deleteDangerousChemicals(id) {\r\n  return request({\r\n    url: '/dangerousChemicals/delete',\r\n    data: {id}\r\n  })\r\n}\r\n\r\n//Type\r\nexport function fetchTypeList(needChildren) {\r\n  return request({\r\n    url: '/dangerousChemicalsType/typeList',\r\n    data: {needChildren}\r\n  })\r\n}\r\n\r\nexport function fetchTypeOne(id) {\r\n  return request({\r\n    url: '/dangerousChemicalsType/typeOne',\r\n    data: {id}\r\n  })\r\n}\r\n\r\nexport function updateType(form) {\r\n  return request({\r\n    url: '/dangerousChemicalsType/update',\r\n    data: {form}\r\n  })\r\n}\r\n\r\nexport function createType(form) {\r\n  return request({\r\n    url: '/dangerousChemicalsType/create',\r\n    data: {form}\r\n  })\r\n}\r\n\r\nexport function deleteType(id) {\r\n  return request({\r\n    url: '/dangerousChemicalsType/delete',\r\n    data: {'id': id}\r\n  })\r\n}\r\n"],"sourceRoot":""}