(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d784ab9"],{ae9c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),n("el-tree",{ref:"treeType",style:{overflow:"auto",padding:"0px",top:"0px"},attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":e.editingMode?e.renderContent:null,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}}),n("el-dialog",{attrs:{title:e.dialogTitle[e.formDialogStatus],visible:e.formDialogVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.formDialogVisible=t}}},[n("el-form",{ref:"formData",attrs:{rules:e.rules,size:"mini",model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"所属类别",prop:"parentId"}},[n("el-cascader",{attrs:{size:"mini",props:e.cascaderProps,placeholder:"所属类别","show-all-levels":!1,options:e.treeData,filterable:"",clearable:!1},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1),n("el-form-item",{attrs:{label:"类别名称",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.formDialogVisible=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.postData()}}},[e._v("确定")])],1)],1)],1)},r=[],i=n("b24b"),o=n("b893"),l={name:"tree-list",props:{leftTreeData:{},editingMode:{default:!1}},data:function(){return{clientHeight:0,defaultProps:{children:"children",label:"label"},dialogTitle:{update:"编辑",create:"创建"},formDialogStatus:"",rules:{name:[{required:!0,message:"类别名称不能为空",trigger:"blur"}]},formDialogVisible:!1,form:{id:null,parentId:null,name:null},cascaderProps:{value:"id",expandTrigger:"hover",checkStrictly:!0},filterText:""}},computed:{treeData:function(){return[{id:-1,label:"【所有类别】",children:this.leftTreeData}]}},mounted:function(){this.clientHeight="".concat(document.documentElement.clientHeight)-80;var e=this;window.onresize=function(){e.clientHeight="".concat(document.documentElement.clientHeight)-80}},watch:{filterText:function(e){this.$refs.treeType.filter(e)}},methods:{renderContent:function(e,t){var n=t.node,a=t.data,r=(t.store,this);return e("span",{attrs:{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"}},[e("span",[e("span",{attrs:{style:"float: left;"}},n.label)]),e("span",[e("el-button",{attrs:{size:"mini",style:"font-size: 12px;padding: 3px",type:"text",plain:""},on:{click:function(){r.formDialogVisible=!0,r.formDialogStatus="create",delete r.form.id,r.form.name="",r.form.parentId=a.id}}},"添加"),e("el-button",{attrs:{size:"mini",style:"font-size: 12px;padding: 3px;"+(a.id<=0?"display:none;":""),type:"text",plain:""},on:{click:function(){r.fetchTypeDataOne(a.id),r.formDialogVisible=!0,r.formDialogStatus="update"}}},"编辑"),e("el-button",{attrs:{size:"mini",style:"font-size: 12px;color:red;padding: 3px;"+(a.id<=0?"display:none;":""),type:"text",plain:""},on:{click:function(){r.$confirm('将删除类别 <span style="color:blue">'+a.label+"</span>，若此类别下有知识条目，删除此类别后，只能在【所有类别】中查看这些知识条目，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then(function(){r.listLoading=!0,Object(i["d"])(a.id).then(function(e){r.listLoading=!1,r.refreshNode(),Object(o["b"])(e,"删除")})}).catch(function(){})}}},"删除")])])},postData:function(){var e=this;this.$refs["formData"].validate(function(t){t&&("update"===e.formDialogStatus?Object(i["j"])(e.form).then(function(t){e.formDialogVisible=!1,e.refreshNode(),Object(o["b"])(t,"更新")}):"create"===e.formDialogStatus&&Object(i["b"])(e.form).then(function(t){e.formDialogVisible=!1,e.refreshNode(),Object(o["b"])(t,"添加")}))})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleNodeClick:function(e){this.$emit("setCurrentSelectedId",e.id)},refreshNode:function(){this.$emit("refreshNode")},fetchTypeDataOne:function(e){var t=this;Object(i["h"])(e).then(function(e){t.form.id=e.data.id,t.form.name=e.data.label,void 0===e.data.parentId?t.form.parentId=-1:t.form.parentId=e.data.parentId})}}},d=l,c=n("2877"),s=Object(c["a"])(d,a,r,!1,null,"1deb747d",null);t["default"]=s.exports},b24b:function(e,t,n){"use strict";n.d(t,"f",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"i",function(){return o}),n.d(t,"a",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"g",function(){return c}),n.d(t,"h",function(){return s}),n.d(t,"j",function(){return u}),n.d(t,"b",function(){return f}),n.d(t,"d",function(){return p});var a=n("b775");function r(e,t,n,r){return Object(a["a"])({url:"/dangerousChemicals/table",data:{pageNumber:e,pageSize:t,typeId:n,keyWords:r}})}function i(e){return Object(a["a"])({url:"/dangerousChemicals/dangerousChemicals",data:{id:e}})}function o(e){return Object(a["a"])({url:"/dangerousChemicals/update",data:{form:e}})}function l(e){return Object(a["a"])({url:"/dangerousChemicals/create",data:{form:e}})}function d(e){return Object(a["a"])({url:"/dangerousChemicals/delete",data:{id:e}})}function c(e){return Object(a["a"])({url:"/dangerousChemicalsType/typeList",data:{needChildren:e}})}function s(e){return Object(a["a"])({url:"/dangerousChemicalsType/typeOne",data:{id:e}})}function u(e){return Object(a["a"])({url:"/dangerousChemicalsType/update",data:{form:e}})}function f(e){return Object(a["a"])({url:"/dangerousChemicalsType/create",data:{form:e}})}function p(e){return Object(a["a"])({url:"/dangerousChemicalsType/delete",data:{id:e}})}}}]);
//# sourceMappingURL=chunk-3d784ab9.79cb8907.js.map